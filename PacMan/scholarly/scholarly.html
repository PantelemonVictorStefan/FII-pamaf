<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
		<title>Scholarly HTML</title>
		<link rel="stylesheet" href="css/style.css">
		<script src="js/gameCore.js"></script>
	</head>
	<body prefix="schema: http://schema.org" onload="startGame()">
		<article typeof="schema:ScholarlyArticle" resource="#">
			<header>
				<h1 property="schema:Name">PAMAF (PacMan)</h1>
			</header>
			<div role="contentinfo">
				<ol role="directory">
					<li><a href="#abstract"><span>1. </span>Abstract</a></li>
					<li><a href="#introduction"><span>2. </span>Introduction</a></li>
					<li><a href="#UserInteraction"><span>3. </span>User Interaction</a></li>
					<li><a href="#VersionControl"><span>4. </span>Version Control</a></li>
					<li><a href="#IntermediateStages"><span>5. </span>Intermediate Stages</a></li>
					<li><a href="#DataModeling"><span>6. </span>Data Modeling & APIs</a></li>
					<li><a href="#LocalStorage"><span>7. </span>Local Storage</a></li>
					<li><a href="#ClassDiagram"><span>8. </span>Class Diagram</a></li>
					<li><a href="#About Classes"><span>9. </span>Implementation</a></li>
				</ol>
				<dl>
					<dt>Authors</dt>
						<dd>
						<ol>
				          <li property="schema:author" typeof="sa:ContributorRole">
				            <a property="schema:author"  typeof="schema:Person">
				              <span property="schema:givenName">Codrin</span>
				              <span property="schema:familyName">Popa</span>
				            </a>
				            
				            <sup property="sa:roleContactPoint" typeof="schema:ContactPoint">
				              <a property="schema:email" href="mailto:pcodrin96@gmail.com" title="corresponding author">&#9993;</a>
				            </sup>
				          </li>
				          <li property="schema:author" typeof="sa:ContributorRole">
				            <a property="schema:author"  typeof="schema:Person">
				              <span property="schema:givenName">Victor</span>
				              <span property="schema:familyName">Pantelemon</span>
				            </a>
				            
				            <sup property="sa:roleContactPoint" typeof="schema:ContactPoint">
				              <a property="schema:email" href="mailto:pantelemonvictor@gmail.com" title="corresponding author">&#9993;</a>
				            </sup>
				          </li>
				        </ol></dd>
				        <dt>Faculty</dt>
						<dd>
						<ol>
				          <li id="faculty">
				            <a href="https://www.info.uaic.ro/bin/Main/" typeof="schema:Faculty">
				              <span property="schema:name">www.info.uaic.ro</span>
				            </a>
				          </li>
				        </ol></dd>
					<dt>Bugs &amp; Feedback</dt>
					<dd>
						<a href="https://github.com/PantelemonVictorStefan/FII-pamaf/issues" typeof="schema:Feedback">Issues and PRs welcome!</a>
					</dd>
				</dl>
			</div>
			<section typeof="sa:Abstract" id="abstract" role="doc-abstract">
				<h2><span>1. </span>Abstract</h2>
				<p>
					PAMAF is basicly a pacman game which takes places on the hallways of the faculty of computer scinece Alexandru Ioan Cuza from Iasi.
				</p>
			</section>
			<section typeof="sa:Introduction" id="introduction" role="doc-introduction">
				<h2><span>2. </span>Concept</h2>
				<p>
					Before starting to work on the project each of the developers had to come up with an idea of design for the main page and then compare with the other designs and pick one.
				</p>
				<h3>Design 1:</h3>
				<figure typeof="sa:Image">
					<img alt="Abordare 1" src="images/abordare1.png" style="height:600px;width: 800px"/>
				</figure>
				<h3>Design 2:</h3>
				<figure typeof="sa:Image">
					<img alt="Abordare 2" src="images/abordare2.png" style="height:600px;width: 800px"/>
				</figure>
				<p>A lot of research was done on the technical side of javascript games and taking the w3schools courses the following prototype came out:</p>
				<canvas></canvas>
				<p>(WASD to move)</p>
			</section>
			<section typeof="sa:UserInteraction" id="UserInteraction">
				<h2><span>3. </span>User Interaction</h2>
				<p>
					After successfully authenticating with facebook the user will find himself in the
					bidimensional hallways of the body C wandering through 
					multiple laboratories while being chased by teachers trying to take his soul.
				</p>
				<p>
					Whenever the user feels lost in the commands or has a sudden need to know more about the game and it's creators 
					he can quickly pause the game and check one of the sections "help" or "about" available in the header without losing the progress.
				</p>
			</section>
			<section typeof="sa:VersionControl" id="VersionControl">
				<h2><span>4. </span>Version Control</h2>
				<p>
					The project is stored on GitHub and the version control is done via GitHub Desktop.
					For the moment the work is done straight on the master branch as the given tasks were not
					complex enough to require multiple branches.
				</p>
			</section>
			<section typeof="sa:IntermediateStages" id="IntermediateStages">
				<h2><span>5. </span>Intermediate Stages</h2>
				<p>
					In the intermediate stages we came up with the architecture of the application, the required classes and how they interact.
				</p>
			</section>
			<section typeof="sa:DataModeling" id="DataModeling">
				<h2><span>6. </span>Data modeling & APIs</h2>
				<h3>Data modeling</h3>
				<p>
					On the backend we are saving to a database the player's facebook id, his progress and his score.
					Information like the score of his friends will also be available for him.
					Each 30 seconds the game will check if either the score or progress has changed and it will send the player's id, score and progress to our api which will store them in the database.
					After authentication the game will download the save from the server and it will compare it's time with the save time of the local storage save and decide which one to load.
				</p>
				<h3>APIs</h3>
				<p>
					We are using the Facebook Login API to authenticate the user. The application is registered at developers.facebook.com and it requires the permission to access user's photos and user's friends.
					Also we make ajax call to the "saveGame" and "loadGame" APIs present on the server which keeps track of the players.
				</p>
				<h3>Microdata</h3>
				<p>
					As for the microdata we used the "itemscope" attribute to create data and the attribute "itemprop" to specify properties.
					In <a href="schema.org/Thing">Schema.org</a>, everything is a Thing:
				</p>
				<p>This is the <code>html</code> tag:</p>
				<pre><code><</code><code>html lang="en" itemscope itemtype="http://schema.org/Thing"</code><code>></code></pre>
				<p>Thing has many child types, so we used itemprop with values like game, description, name, etc.</p>
				<p>Examples:</p>
				
					<code>&ltdiv class="help text" itemprop="about"&gt </code></br>
					<code>&ltdiv class="game" itemscope itemtype="http://schema.org/Game"&gt </code></br>
					<code>&ltdiv class="about text" itemprop="about"&gt </code></br>
					<code>&lth2 itemprop="name">About Pac-Man&lt/h2&gt</code>
			</section>
			<section typeof="sa:LocalStorage" id="LocalStorage">
				<h2><span>7. </span>Local Storage</h2>
				<p>
					We are using Local Web Storage to store the score and progress of the player. 
					Each 10 seconds the class Game will update the key "currentGame" with a variable containing player's progress and score.
					"localStorage.setItem("currentGame",JSON.stringify(gameLogic.saveFile));"
					When the game starts it will check if the local storage contains any save file "var savedFile = localStorage.getItem('currentGame');"
				</p>
			</section>

			<section typeof="sa:ClassDiagram" id="ClassDiagram">
				<h2><span>8. </span>Class Diagram</h2>
				<img alt="Abordare 2" src="images/pacmanUML.png" style="height:600px;width: 1000px"/>
			</section>

			<section typeof="sa:AboutClasses" id="AboutClasses">
				<h2><span>9. </span>About Classes</h2>
				<dl>
					<dt>Game</dt>
					<dd>
						<p>This is a static class responsible with canvas interaction and controls.</p>
						<p>Methods:</p>
						<ul>
							<il><p>start(): initializes the game, creates canvas,defines the controls and how often to update the game content(fps)</p></il>
							<il><p>stop(): this is a final state, specifically the game canvas will not be updated anymore after calling this method</p></il>
							<il><p>pause(): same as the stop() method only this is not a final state and calling this method while the game is paused will unpause the game</p></il>
							<il><p>clear(): removes all the elements from the canvas</p></il>
							<il><p>updateGameArea(): this method calls the clear() method and then updates the canvas content accordingly to the GameLogic class </p></il>
						</ul>
					</dd>
					<dt>GameLogic</dt>
  				<dd>
							<p>This class runs the game logic accordingly to the user input and state of the game. 
								The game has a linear course of events and for each state there is a method to be called. 
								Each method may change the state of the game at some point.
							</p>
							<p>Methods:</p>
							<ul>
									<il><p>The most significant method of this class is runGameLogic() which depending on the state will decide which method to call next.</p></il>
							</ul>
					</dd>
					<dt>Component</dt>
  				<dd>
							<p>This class defines the basic properties and methods an element of the canvas has such as dimensions(width and height) and position(x and y).
							</p>
							<p>Methods:</p>
							<ul>
									<il><p>draw(): the component will draw itself on the canvas using this method</p></il>
									<il><p>update(): the component will update it's properties using this method</p></il>
							</ul>
					</dd>
					<dt>Mob</dt>
  				<dd>
							<p>This class extends Component class and defines all the computer controlled entities.
							</p>
							<p>Methods:</p>
							<ul>
									<il><p>doMobStuff(): this method is responsible for the artificial intelligence part. It will compute the direction the mob will go.</p></il>
									<il><p>getcollidedPart(): this method is used by the artificial intelligence part to decide in which direction to go after the mob has collided with a wall</p></il>
							</ul>
					</dd>
					
					<dt>Player</dt>
  				<dd>
							<p>This class extends Component class and represents the player.</p>
							<p>Methods:</p>
							<ul>
									<il><p>hascollided(): this method gets the colision type(colision with wall or mob or booster) and calls the handleColision method</p></il>
									<il><p>getcollidedPart(): same as the mob method only used in another context</p></il>
							</ul>
					</dd>
					<dt>Booster</dt>
  				<dd>
							<p>This class extends Collectible class which extends Component. This class has no methods and only defines collectible elements and their effects.</p>
					</dd>

					<dt>MapElement</dt>
  				<dd>
							<p>This class extends Component. This class has no methods and only defines fixed elements of the map like furniture and such.</p>
					</dd>

					<dt>Map</dt>
  				<dd>
							<p>This class represents the map. It also contains all the MapElement components and draws them over the map texture. </p>
					</dd>
				</dl>
			</section>

		</article>
	</body>
</html>